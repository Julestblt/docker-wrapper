[tox]
envlist = py39,py310,py311,py312,lint,coverage
isolated_build = true

[testenv]
deps =
    -e .[test]
commands =
    python -m unittest discover tests -p "test_unittest.py" -v
    python -m pytest tests/ -v

[testenv:lint]
deps =
    -e .[dev]
commands =
    python -m flake8 docker_tool tests --max-line-length=100 --exclude=__pycache__
    python -m black --check --line-length=100 docker_tool tests
    python -m mypy docker_tool --ignore-missing-imports

[testenv:coverage]
deps =
    -e .[test]
commands =
    python -m pytest tests/ --cov=docker_tool --cov-report=term-missing --cov-report=html:htmlcov --cov-fail-under=80

[testenv:unit-only]
commands =
    python -m unittest discover tests -p "test_unittest.py" -v
